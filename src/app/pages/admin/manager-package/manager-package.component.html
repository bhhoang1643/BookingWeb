<div class="container">
  <h2>Manage Agent Packages</h2>

  <div style="text-align: center; margin-bottom: 20px;">
    <button (click)="showCreateForm()" *ngIf="!showForm" class="btn-gradient">➕ Create New Package</button>
  </div>

  <form *ngIf="showForm" [formGroup]="packageForm" (ngSubmit)="onSubmit()" class="form">
    <div class="form-group">
      <label for="name">Package Name:</label>
      <input id="name" type="text" formControlName="name" placeholder="Enter package name" required />
    </div>

    <div class="form-group">
      <label for="price">Price (VND):</label>
      <input id="price" type="number" formControlName="price" placeholder="Enter price" required />
    </div>

    <div class="form-group">
      <label for="duration">Duration (Months):</label>
      <input id="duration" type="number" formControlName="duration" placeholder="Enter duration" required />
    </div>

    <div class="form-group">
      <label for="accountId">Account ID:</label>
      <input id="accountId" type="number" formControlName="accountId" placeholder="Enter account ID" required />
    </div>

    <div class="form-group" style="flex: 1 1 100%;">
      <label for="paymentStatus">Payment Status:</label>
      <select id="paymentStatus" formControlName="paymentStatus" required>
        <option value="paid">Paid</option>
        <option value="unpaid">Unpaid</option>
      </select>
    </div>

    <div class="form-buttons">
      <button type="submit" class="btn-gradient">{{ isEditing ? 'Update Package' : 'Save Package' }}</button>
      <button type="button" (click)="cancelForm()" class="btn-orange">Cancel</button>
    </div>
  </form>

  <hr />

  <h3>Package List</h3>
  <table class="table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Package Name</th>
        <th>Price</th>
        <th>Duration</th>
        <th>Payment Status</th>
        <th>Account ID</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let pkg of packages">
        <td>{{ pkg.id }}</td>
        <td>{{ pkg.name }}</td>
        <td>{{ pkg.price | number:'1.0-0' }} VND</td>
        <td>{{ pkg.startDate }} → {{ pkg.endDate }}</td>
        <td>
          <span [class.badge-paid]="pkg.paymentStatus === 'paid'" [class.badge-unpaid]="pkg.paymentStatus === 'unpaid'">
            {{ pkg.paymentStatus === 'paid' ? 'Paid' : 'Unpaid' }}
          </span>
        </td>
        <td>{{ pkg.accountId }}</td>
        <td>
          <div class="action-buttons">
            <button (click)="edit(pkg)" class="btn-edit">✏️</button>
            <button (click)="delete(pkg.id!)" class="btn-delete">🗑️</button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
